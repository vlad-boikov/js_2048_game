{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","button","cells","querySelectorAll","messageWin","messageLose","messageStart","rows","columnsQnt","total","looser","result","row","length","rowArrayer","forEach","el","ind","arr","i","children","innerText","ar","hasEmptyCells","classList","remove","child","push","Number","rowReverseArrayer","innerHTML","styleUpdater","move","filtered","filter","value","column","num","add","moveLeft","temp","cellsAdder","moveRight","reverse","columnArayer","collection","index","moveUp","moved","moveDown","gameStarter","index1","Math","floor","random","index2","value1","cellsCreator","value2","resultCell","restarter","cell","className","wasAdded","messageUpdater","startHandler","e","target","restartHandler","addEventListener","code"],"mappings":"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","file":"main.c81c352c.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('tbody');\nconst button = document.querySelector('.button');\nconst cells = table.querySelectorAll('td');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\nconst messageStart = document.querySelector('.message-start');\nconst rows = table.rows;\nconst columnsQnt = 4;\nlet total = 0;\n\nfunction looser() {\n  let result = false;\n\n  for (let row = 0; row < rows.length; row++) {\n    const temp = rowArrayer(rows[row]);\n\n    temp.forEach((el, ind, arr) => {\n      if (el === arr[ind + 1]) {\n        result = true;\n      }\n    });\n  };\n\n  for (let i = 0; i < columnsQnt; i++) {\n    const arr = [\n      +rows[0].children[i].innerText,\n      +rows[1].children[i].innerText,\n      +rows[2].children[i].innerText,\n      +rows[3].children[i].innerText,\n    ];\n\n    arr.forEach((el, ind, ar) => {\n      if (el === ar[ind + 1]) {\n        result = true;\n      };\n    });\n  }\n\n  if (!hasEmptyCells() && result === false) {\n    messageLose.classList.remove('hidden');\n  };\n};\n\nfunction rowArrayer(row) {\n  const result = [];\n\n  for (const child of row.children) {\n    if (child.innerText === '') {\n      result.push(0);\n      continue;\n    }\n    result.push(Number(child.innerText));\n  };\n\n  return result;\n};\n\nfunction rowReverseArrayer(arr, row) {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i] === 0) {\n      row.children[i].innerHTML = '';\n      continue;\n    };\n\n    row.children[i].innerText = arr[i];\n  }\n\n  styleUpdater();\n}\n\nfunction move(row) {\n  let filtered = row.filter(el => el > 0);\n\n  for (let i = 0; i < filtered.length - 1; i++) {\n    if (filtered[i] === filtered[i + 1]) {\n      const value = filtered[i] * 2;\n\n      total += value;\n      filtered[i] = value;\n      filtered[i + 1] = 0;\n    };\n  };\n\n  filtered = filtered.filter(el => el > 0);\n\n  while (filtered.length < columnsQnt) {\n    filtered.push(0);\n  };\n\n  return filtered;\n};\n\nfunction styleUpdater() {\n  const score = document.querySelector('.game-score');\n\n  score.innerText = `${total}`;\n\n  for (let row = 0; row < rows.length; row++) {\n    for (let column = 0; column < columnsQnt; column++) {\n      const num = rows[row].children[column].innerText;\n\n      rows[row].children[column].classList.value = '';\n      rows[row].children[column].classList.add('field-cell');\n\n      if (num !== '') {\n        rows[row].children[column].classList.add(`field-cell--${num}`);\n      }\n    }\n  };\n};\n\nfunction moveLeft() {\n  for (const row of rows) {\n    let temp = rowArrayer(row);\n\n    temp = move(temp);\n    rowReverseArrayer(temp, row);\n  };\n\n  cellsAdder();\n};\n\nfunction moveRight() {\n  for (const row of rows) {\n    let temp = rowArrayer(row);\n\n    temp.reverse();\n    temp = move(temp);\n    temp.reverse();\n    rowReverseArrayer(temp, row);\n  }\n  cellsAdder();\n}\n\nfunction columnArayer(collection, index) {\n  return [\n    +collection[0].children[index].innerText,\n    +collection[1].children[index].innerText,\n    +collection[2].children[index].innerText,\n    +collection[3].children[index].innerText,\n  ];\n}\n\nfunction moveUp() {\n  for (let i = 0; i < columnsQnt; i++) {\n    const arr = columnArayer(rows, i);\n\n    const moved = move(arr);\n\n    [...rows].forEach((row, index) => {\n      row.children[i].innerText = moved[index] === 0 ? '' : moved[index];\n    });\n  };\n  cellsAdder();\n};\n\nfunction moveDown() {\n  for (let i = 0; i < columnsQnt; i++) {\n    const arr = columnArayer(rows, i);\n\n    arr.reverse();\n\n    const moved = move(arr);\n\n    moved.reverse();\n\n    [...rows].forEach((row, index) => {\n      row.children[i].innerText = moved[index] === 0 ? '' : moved[index];\n    });\n  };\n  cellsAdder();\n}\n\nfunction gameStarter() {\n  const index1 = Math.floor(Math.random() * cells.length);\n  let index2 = Math.floor(Math.random() * cells.length);\n\n  while (index1 === index2) {\n    index2 = Math.floor(Math.random() * cells.length);\n  }\n\n  const value1 = cellsCreator();\n  let value2 = cellsCreator();\n\n  while (value1 === value2) {\n    value2 = cellsCreator();\n  }\n\n  cells[index1].innerText = cellsCreator();\n  cells[index2].innerText = cellsCreator();\n\n  styleUpdater();\n};\n\nfunction cellsCreator() {\n  let resultCell;\n  const probability = Math.random();\n\n  if (probability < 0.1) {\n    resultCell = 4;\n  } else {\n    resultCell = 2;\n  }\n\n  return resultCell;\n}\n\nfunction restarter() {\n  for (const cell of cells) {\n    cell.innerHTML = '';\n    cell.classList.value = '';\n    cell.className = 'field-cell';\n  }\n  total = 0;\n  styleUpdater();\n}\n\nfunction cellsAdder() {\n  if (!hasEmptyCells()) {\n    return;\n  }\n\n  let wasAdded = false;\n\n  while (!wasAdded) {\n    const index = Math.floor(Math.random() * cells.length);\n\n    if (cells[index].innerText === '') {\n      cells[index].innerText = cellsCreator();\n      wasAdded = true;\n    };\n  };\n  styleUpdater();\n};\n\nfunction hasEmptyCells() {\n  for (const cell of cells) {\n    if (cell.innerText === '') {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nfunction messageUpdater() {\n  for (const cell of cells) {\n    if (cell.innerText === '2048') {\n      messageWin.classList.remove('hidden');\n    };\n  };\n};\n\nfunction startHandler(e) {\n  e.target.classList.value = '';\n  e.target.classList.add('button', 'restart');\n  e.target.innerText = 'Restart';\n  messageStart.classList.add('hidden');\n\n  gameStarter();\n}\n\nfunction restartHandler(e) {\n  e.target.classList.value = '';\n  e.target.classList.add('button', 'start');\n  e.target.innerText = 'Start';\n  messageStart.classList.remove('hidden');\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n\n  restarter();\n}\n\nbutton.addEventListener('click', e => {\n  switch (e.target.innerText) {\n    case 'Start':\n      startHandler(e);\n      break;\n    case 'Restart':\n      restartHandler(e);\n      break;\n  };\n});\n\ndocument.addEventListener('keyup', e => {\n  if (e.code === 'ArrowLeft') {\n    moveLeft();\n    styleUpdater();\n    messageUpdater();\n    looser();\n  };\n});\n\ndocument.addEventListener('keyup', e => {\n  if (e.code === 'ArrowRight') {\n    moveRight();\n    styleUpdater();\n    messageUpdater();\n    looser();\n  };\n});\n\ndocument.addEventListener('keyup', e => {\n  if (e.code === 'ArrowUp') {\n    moveUp();\n    styleUpdater();\n    messageUpdater();\n    looser();\n  };\n});\n\ndocument.addEventListener('keyup', e => {\n  if (e.code === 'ArrowDown') {\n    moveDown();\n    messageUpdater();\n    styleUpdater();\n    looser();\n  };\n});\n"]}